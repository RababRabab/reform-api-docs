{"swagger":"2.0","info":{"description":"download, upload","version":"2-beta","title":"CCD Case Document AM API"},"host":"localhost","basePath":"/","tags":[{"name":"case-document-am-controller","description":"Case Document Am Controller"},{"name":"delete","description":"Delete endpoints"},{"name":"get","description":"Get data endpoints"},{"name":"patch","description":"Patch data related endpoints"},{"name":"upload","description":"Upload documents"}],"paths":{"/cases/documents":{"post":{"tags":["upload"],"summary":"creates a list of stored document by uploading a list of binary/text file","operationId":"uploadDocumentsUsingPOST","consumes":["multipart/form-data"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"caseTypeId","in":"formData","required":false,"type":"string"},{"name":"jurisdictionId","in":"formData","required":false,"type":"string"},{"name":"files","in":"formData","required":false,"type":"array","items":{"type":"file"},"collectionFormat":"multi"},{"name":"classification","in":"formData","required":false,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"Created","schema":{"$ref":"#/definitions/UploadResponse"}},"400":{"description":"Case Type ID is not valid"}}}},"/cases/documents/attachToCase":{"patch":{"tags":["patch"],"summary":"Updates a list of case document with provided metadata","operationId":"patchMetaDataOnDocumentsUsingPATCH","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"body","name":"caseDocumentsMetadata","description":"caseDocumentsMetadata","required":true,"schema":{"$ref":"#/definitions/CaseDocumentsMetadata"}},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/PatchDocumentMetaDataResponse"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}}},"/cases/documents/{documentId}":{"get":{"tags":["get"],"summary":"Retrieves JSON representation of a Stored Document.","operationId":"getDocumentByDocumentIdUsingGET","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string","format":"uuid"},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/StoredDocumentHalResource"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}},"delete":{"tags":["delete"],"summary":"Deletes a case document with service authorization.","operationId":"deleteDocumentByDocumentIdUsingDELETE","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string","format":"uuid"},{"name":"permanent","in":"query","description":"permanent","required":false,"type":"boolean","default":false},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Error-ModelName{namespace='java.lang', name='Void'}"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}},"patch":{"tags":["patch"],"summary":"Updates ttl on document ","operationId":"patchDocumentByDocumentIdUsingPATCH","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string","format":"uuid"},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"},{"in":"body","name":"ttlRequest","description":"ttlRequest","required":true,"schema":{"$ref":"#/definitions/UpdateTtlRequest"}}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/PatchDocumentResponse"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}}},"/cases/documents/{documentId}/binary":{"get":{"tags":["get"],"summary":"Streams contents of the most recent Document associated with the Case Document.","operationId":"getDocumentBinaryContentByDocumentIdUsingGET","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string","format":"uuid"},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"object"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}}},"/cases/documents/{documentId}/token":{"get":{"tags":["get"],"summary":"Retrieves the hashcode for document Id","operationId":"generateHashCodeUsingGET","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"documentId","in":"path","description":"documentId","required":true,"type":"string","format":"uuid"},{"name":"ServiceAuthorization","in":"header","description":"S2S JWT token for an approved micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/GeneratedHashCodeResponse"}},"400":{"description":"Case document Id is not valid"},"404":{"description":"Case document not found"}}}}},"definitions":{"ByteArrayResource":{"type":"object","properties":{"byteArray":{"type":"string","format":"byte"},"description":{"type":"string"},"file":{"type":"file"},"filename":{"type":"string"},"inputStream":{"$ref":"#/definitions/InputStream"},"open":{"type":"boolean"},"readable":{"type":"boolean"},"uri":{"type":"string","format":"uri"},"url":{"type":"string","format":"url"}},"title":"ByteArrayResource"},"CaseDocumentsMetadata":{"type":"object","required":["caseId","caseTypeId","jurisdictionId"],"properties":{"caseId":{"type":"string","minLength":16,"maxLength":16,"pattern":"^[0-9]*$"},"caseTypeId":{"type":"string","pattern":"^[a-zA-Z0-9_-]*$"},"documentHashTokens":{"type":"array","items":{"$ref":"#/definitions/DocumentHashToken"}},"jurisdictionId":{"type":"string","pattern":"^[a-zA-Z0-9_-]*$"}},"title":"CaseDocumentsMetadata"},"Document":{"type":"object","properties":{"_links":{"$ref":"#/definitions/Links"},"classification":{"type":"string","enum":["PRIVATE","PUBLIC","RESTRICTED"]},"createdOn":{"type":"string","format":"date-time"},"hashToken":{"type":"string"},"metadata":{"type":"object","additionalProperties":{"type":"string"}},"mimeType":{"type":"string"},"originalDocumentName":{"type":"string"},"size":{"type":"integer","format":"int64"},"ttl":{"type":"string","format":"date-time"}},"title":"Document"},"DocumentHashToken":{"type":"object","properties":{"hashToken":{"type":"string"},"id":{"type":"string","format":"uuid"}},"title":"DocumentHashToken"},"GeneratedHashCodeResponse":{"type":"object","properties":{"hashToken":{"type":"string"}},"title":"GeneratedHashCodeResponse"},"InputStream":{"type":"object","title":"InputStream"},"Link":{"type":"object","properties":{"href":{"type":"string"}},"title":"Link"},"Links":{"type":"object","properties":{"binary":{"$ref":"#/definitions/Link"},"self":{"$ref":"#/definitions/Link"}},"title":"Links"},"Links0":{"type":"object","properties":{"empty":{"type":"boolean"}},"title":"Links0"},"PatchDocumentMetaDataResponse":{"type":"object","required":["Result"],"properties":{"Result":{"type":"string"}},"title":"PatchDocumentMetaDataResponse"},"PatchDocumentResponse":{"type":"object","properties":{"createdOn":{"type":"string","format":"date-time"},"lastModifiedBy":{"type":"string"},"mimeType":{"type":"string"},"modifiedOn":{"type":"string","format":"date-time"},"originalDocumentName":{"type":"string"},"ttl":{"type":"string","format":"date-time"}},"title":"PatchDocumentResponse"},"StoredDocumentHalResource":{"type":"object","properties":{"_links":{"$ref":"#/definitions/Links0"},"classification":{"type":"string","enum":["PRIVATE","PUBLIC","RESTRICTED"]},"createdBy":{"type":"string"},"createdOn":{"type":"string","format":"date-time"},"hashCode":{"type":"string"},"lastModifiedBy":{"type":"string"},"metadata":{"type":"object","additionalProperties":{"type":"string"}},"mimeType":{"type":"string"},"modifiedOn":{"type":"string","format":"date-time"},"originalDocumentName":{"type":"string"},"size":{"type":"integer","format":"int64"},"ttl":{"type":"string","format":"date-time"}},"title":"StoredDocumentHalResource"},"UpdateTtlRequest":{"type":"object","properties":{"ttl":{"type":"string","format":"date-time"}},"title":"UpdateTtlRequest"},"UploadResponse":{"type":"object","properties":{"documents":{"type":"array","items":{"$ref":"#/definitions/Document"}}},"title":"UploadResponse"}}}
