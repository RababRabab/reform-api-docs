{"swagger":"2.0","info":{"description":"Mange case access","version":"1.0.0","title":"Mange case assignment API","contact":{"name":"CDM","url":"https://tools.hmcts.net/confluence/display/RCCD/Reform%3A+Core+Case+Data+Home","email":"corecasedatateam@hmcts.net"}},"host":"localhost","basePath":"/","tags":[{"name":"case-assignment-controller","description":"Case Assignment Controller"},{"name":"root-controller","description":"Root Controller"}],"paths":{"/":{"get":{"tags":["root-controller"],"summary":"welcome","operationId":"welcomeUsingGET","produces":["*/*"],"parameters":[{"name":"Authorization","in":"header","description":"IDAM Bearer token","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"S2S Bearer token of a allowed-list micro-service","required":true,"type":"string"}],"responses":{"200":{"description":"OK","schema":{"type":"string"}}},"deprecated":false}},"/case-assignments":{"get":{"tags":["case-assignment-controller"],"summary":"Get Case Assignments in My Organisation","description":"Get Assignments in My Organisation","operationId":"getCaseAssignmentsUsingGET","produces":["application/json"],"parameters":[{"name":"Authorization","in":"header","description":"IDAM Bearer token","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"S2S Bearer token of a allowed-list micro-service","required":true,"type":"string"},{"name":"case_ids","in":"query","description":"case_ids","required":true,"type":"array","items":{"type":"string"},"collectionFormat":"multi"}],"responses":{"200":{"description":"Case-User-Role assignments returned successfully.","examples":{"application/json":"{\n  \"status_message\": \"Case-User-Role assignments returned successfully\",\n  \"case_assignments\": [\n    {\n      \"case_id\": \"1588234985453946\",\n      \"shared_with\": [\n        {\n          \"idam_id\": \"221a2877-e1ab-4dc4-a9ff-f9424ad58738\",\n          \"first_name\": \"Bill\",\n          \"last_name\": \"Roberts\",\n          \"email\": \"bill.roberts@greatbrsolicitors.co.uk\",\n          \"case_roles\": [\n            \"[Claimant]\",\n            \"[Defendant]\"\n          ]\n        }\n      ]\n    }    \n  ]\n}"},"schema":{"$ref":"#/definitions/Get case assignments response"}},"400":{"description":"case_ids must be a non-empty list of proper case ids.","examples":{"application/json":"{\"message\": \"case_ids must be a non-empty list of proper case ids\", \"status\": \"BAD_REQUEST\" }"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"UnAuthorised S2S service.\n"}},"deprecated":false},"post":{"tags":["case-assignment-controller"],"summary":"Assign Access within Organisation","description":"Assign Access within Organisation","operationId":"assignAccessWithinOrganisationUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"Authorization","in":"header","description":"IDAM Bearer token","required":true,"type":"string"},{"name":"ServiceAuthorization","in":"header","description":"S2S Bearer token of a allowed-list micro-service","required":true,"type":"string"},{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Case Assignment Request"}}],"responses":{"201":{"description":"Role from the organisation policy successfully assigned to the assignee.","schema":{"$ref":"#/definitions/Case Assignment Response"}},"400":{"description":"One of the following reasons.\n1) Case ID has to be a valid 16-digit Luhn number \n2) Case ID has to be 16-digits long \n3) Case ID can not be empty \n4) Case type ID can not be empty \n5) Assignee IDAM ID can not be empty \n6) Intended assignee has to be in the same organisation as that of the invoker. \n7) Case ID has to be one for which a case role is represented by the invoker's organisation. \n8) Intended assignee has to be a solicitor enabled in the jurisdiction of the case. \n","examples":{"application/json":"{\"message\": \"Intended assignee has to be in the same organisation of invoker\", \"status\": \"BAD_REQUEST\" }"},"schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"One of the following reasons.\n1) UnAuthorised S2S service \n2) The user is neither a case access administrator nor a solicitor with access to the jurisdiction"},"500":{"description":"One of the following reasons.\n1) Case could not be fetched"}},"deprecated":false}}},"definitions":{"ApiError":{"type":"object","properties":{"errors":{"type":"array","items":{"type":"string"}},"message":{"type":"string"},"status":{"type":"string","enum":["CONTINUE","SWITCHING_PROTOCOLS","PROCESSING","CHECKPOINT","OK","CREATED","ACCEPTED","NON_AUTHORITATIVE_INFORMATION","NO_CONTENT","RESET_CONTENT","PARTIAL_CONTENT","MULTI_STATUS","ALREADY_REPORTED","IM_USED","MULTIPLE_CHOICES","MOVED_PERMANENTLY","FOUND","MOVED_TEMPORARILY","SEE_OTHER","NOT_MODIFIED","USE_PROXY","TEMPORARY_REDIRECT","PERMANENT_REDIRECT","BAD_REQUEST","UNAUTHORIZED","PAYMENT_REQUIRED","FORBIDDEN","NOT_FOUND","METHOD_NOT_ALLOWED","NOT_ACCEPTABLE","PROXY_AUTHENTICATION_REQUIRED","REQUEST_TIMEOUT","CONFLICT","GONE","LENGTH_REQUIRED","PRECONDITION_FAILED","PAYLOAD_TOO_LARGE","REQUEST_ENTITY_TOO_LARGE","URI_TOO_LONG","REQUEST_URI_TOO_LONG","UNSUPPORTED_MEDIA_TYPE","REQUESTED_RANGE_NOT_SATISFIABLE","EXPECTATION_FAILED","I_AM_A_TEAPOT","INSUFFICIENT_SPACE_ON_RESOURCE","METHOD_FAILURE","DESTINATION_LOCKED","UNPROCESSABLE_ENTITY","LOCKED","FAILED_DEPENDENCY","TOO_EARLY","UPGRADE_REQUIRED","PRECONDITION_REQUIRED","TOO_MANY_REQUESTS","REQUEST_HEADER_FIELDS_TOO_LARGE","UNAVAILABLE_FOR_LEGAL_REASONS","INTERNAL_SERVER_ERROR","NOT_IMPLEMENTED","BAD_GATEWAY","SERVICE_UNAVAILABLE","GATEWAY_TIMEOUT","HTTP_VERSION_NOT_SUPPORTED","VARIANT_ALSO_NEGOTIATES","INSUFFICIENT_STORAGE","LOOP_DETECTED","BANDWIDTH_LIMIT_EXCEEDED","NOT_EXTENDED","NETWORK_AUTHENTICATION_REQUIRED"]}},"title":"ApiError"},"Case Assignment Request":{"type":"object","required":["assignee_id","case_id","case_type_id"],"properties":{"assignee_id":{"type":"string","example":"ecb5edf4-2f5f-4031-a0ec","description":"IDAM ID of the Assign User"},"case_id":{"type":"string","example":1583841721773828,"description":"Case ID to Assign Access To"},"case_type_id":{"type":"string","example":"PROBATE-TEST","description":"Case type ID of the requested case"}},"title":"Case Assignment Request"},"Case Assignment Response":{"type":"object","required":["status_message"],"properties":{"status_message":{"type":"string","example":"Role [Defendant] from the organisation policy successfully assigned to the assignee.","description":"Domain Status Message"}},"title":"Case Assignment Response"},"CaseAssignedUsers":{"type":"object","properties":{"case_id":{"type":"string"},"shared_with":{"type":"array","items":{"$ref":"#/definitions/UserDetails"}}},"title":"CaseAssignedUsers"},"Get case assignments response":{"type":"object","required":["case_assignments","status_message"],"properties":{"case_assignments":{"type":"array","description":"Case Assignments","items":{"$ref":"#/definitions/CaseAssignedUsers"}},"status_message":{"type":"string","example":"Case-User-Role assignments returned successfully","description":"Domain Status Message"}},"title":"Get case assignments response"},"UserDetails":{"type":"object","properties":{"case_roles":{"type":"array","items":{"type":"string"}},"email":{"type":"string"},"first_name":{"type":"string"},"idam_id":{"type":"string"},"last_name":{"type":"string"}},"title":"UserDetails"}}}
