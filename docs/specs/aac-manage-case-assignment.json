{"swagger":"2.0","info":{"description":"Mange case access","version":"1.0.0","title":"Mange case assignment API","contact":{"name":"CDM","url":"https://tools.hmcts.net/confluence/display/RCCD/Reform%3A+Core+Case+Data+Home","email":"corecasedatateam@hmcts.net"}},"host":"localhost","basePath":"/","tags":[{"name":"case-assignment-controller","description":"Case Assignment Controller"},{"name":"root-controller","description":"Root Controller"}],"paths":{"/":{"get":{"tags":["root-controller"],"summary":"welcome","operationId":"welcomeUsingGET","produces":["*/*"],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/case-assignments":{"get":{"tags":["case-assignment-controller"],"summary":"Get Case Assignments in My Organisation","description":"Get Assignments in My Organisation","operationId":"getCaseAssignmentsUsingGET","produces":["application/json"],"parameters":[{"name":"case_ids","in":"query","description":"case_ids","required":true,"type":"array","items":{"type":"string"},"collectionFormat":"multi"}],"responses":{"200":{"description":"Case-User-Role assignments returned successfully.","examples":{"application/json":"{\n  \"status_message\": \"Case-User-Role assignments returned successfully\",\n  \"case_assignments\": [\n    {\n      \"case_id\": \"1588234985453946\",\n      \"shared_with\": [\n        {\n          \"idam_id\": \"221a2877-e1ab-4dc4-a9ff-f9424ad58738\",\n          \"first_name\": \"Bill\",\n          \"last_name\": \"Roberts\",\n          \"email\": \"bill.roberts@greatbrsolicitors.co.uk\",\n          \"case_roles\": [\n            \"[Claimant]\",\n            \"[Defendant]\"\n          ]\n        }\n      ]\n    }    \n  ]\n}"},"schema":{"$ref":"#/definitions/Get case assignments response"}},"400":{"description":"case_ids must be a non-empty list of proper case ids.","examples":{"application/json":"{\"message\": \"case_ids must be a non-empty list of proper case ids\", \"status\": \"BAD_REQUEST\" }"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."}}},"post":{"tags":["case-assignment-controller"],"summary":"Assign Access within Organisation","description":"Assign Access within Organisation","operationId":"assignAccessWithinOrganisationUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Case Assignment Request"}}],"responses":{"201":{"description":"Role from the organisation policy successfully assigned to the assignee.","schema":{"$ref":"#/definitions/Case Assignment Response"}},"400":{"description":"One or more of the following reasons:\n1) Case ID has to be a valid 16-digit Luhn number\n2) Case ID has to be 16-digits long\n3) Case ID can not be empty\n4) Case type ID can not be empty\n5) IDAM Assignee ID can not be empty\n6) Intended assignee has to be in the same organisation as that of the invoker.\n7) Case ID has to be one for which a case role is represented by the invoker's organisation.\n8) Intended assignee has to be a solicitor enabled in the jurisdiction of the case.","examples":{"application/json":"{\n   \"status\": \"BAD_REQUEST\",\n   \"message\": \"Intended assignee has to be in the same organisation as that of the invoker.\",\n   \"errors\": [ ]\n}"},"schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"500":{"description":"Case could not be fetched"}}},"delete":{"tags":["case-assignment-controller"],"summary":"Unassign Access within Organisation","description":"Unassign Access within Organisation","operationId":"unassignAccessWithinOrganisationUsingDELETE","produces":["application/json"],"parameters":[{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Case Unassignment Request"}}],"responses":{"200":{"description":"Unassignment(s) performed successfully.","schema":{"$ref":"#/definitions/Case Unassignment Response"}},"400":{"description":"One or more of the following reasons:\n1) Requested Unassignments can not be empty\n2) Case ID has to be a valid 16-digit Luhn number\n3) Case ID has to be 16-digits long\n4) Case ID can not be empty\n5) IDAM Assignee ID can not be empty\n6) Case role name format is invalid\n7) Intended user to be unassigned has to be in the same organisation as that of the invoker.","examples":{"application/json":"{\n   \"status\": \"BAD_REQUEST\",\n   \"errors\": [\n      \"Case ID has to be a valid 16-digit Luhn number\", \n      \"Case role name format is invalid\"\n   ]\n}"},"schema":{"$ref":"#/definitions/ApiError"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."}}}}},"definitions":{"ApiError":{"type":"object","properties":{"errors":{"type":"array","items":{"type":"string"}},"message":{"type":"string"},"status":{"type":"string","enum":["ACCEPTED","ALREADY_REPORTED","BAD_GATEWAY","BAD_REQUEST","BANDWIDTH_LIMIT_EXCEEDED","CHECKPOINT","CONFLICT","CONTINUE","CREATED","DESTINATION_LOCKED","EXPECTATION_FAILED","FAILED_DEPENDENCY","FORBIDDEN","FOUND","GATEWAY_TIMEOUT","GONE","HTTP_VERSION_NOT_SUPPORTED","IM_USED","INSUFFICIENT_SPACE_ON_RESOURCE","INSUFFICIENT_STORAGE","INTERNAL_SERVER_ERROR","I_AM_A_TEAPOT","LENGTH_REQUIRED","LOCKED","LOOP_DETECTED","METHOD_FAILURE","METHOD_NOT_ALLOWED","MOVED_PERMANENTLY","MOVED_TEMPORARILY","MULTIPLE_CHOICES","MULTI_STATUS","NETWORK_AUTHENTICATION_REQUIRED","NON_AUTHORITATIVE_INFORMATION","NOT_ACCEPTABLE","NOT_EXTENDED","NOT_FOUND","NOT_IMPLEMENTED","NOT_MODIFIED","NO_CONTENT","OK","PARTIAL_CONTENT","PAYLOAD_TOO_LARGE","PAYMENT_REQUIRED","PERMANENT_REDIRECT","PRECONDITION_FAILED","PRECONDITION_REQUIRED","PROCESSING","PROXY_AUTHENTICATION_REQUIRED","REQUESTED_RANGE_NOT_SATISFIABLE","REQUEST_ENTITY_TOO_LARGE","REQUEST_HEADER_FIELDS_TOO_LARGE","REQUEST_TIMEOUT","REQUEST_URI_TOO_LONG","RESET_CONTENT","SEE_OTHER","SERVICE_UNAVAILABLE","SWITCHING_PROTOCOLS","TEMPORARY_REDIRECT","TOO_EARLY","TOO_MANY_REQUESTS","UNAUTHORIZED","UNAVAILABLE_FOR_LEGAL_REASONS","UNPROCESSABLE_ENTITY","UNSUPPORTED_MEDIA_TYPE","UPGRADE_REQUIRED","URI_TOO_LONG","USE_PROXY","VARIANT_ALSO_NEGOTIATES"]}},"title":"ApiError"},"Case Assignment Request":{"type":"object","required":["assignee_id","case_id","case_type_id"],"properties":{"assignee_id":{"type":"string","example":"ecb5edf4-2f5f-4031-a0ec","description":"IDAM ID of the Assign User"},"case_id":{"type":"string","example":1583841721773828,"description":"Case ID to Assign Access To","minLength":16,"maxLength":16},"case_type_id":{"type":"string","example":"PROBATE-TEST","description":"Case type ID of the requested case"}},"title":"Case Assignment Request"},"Case Assignment Response":{"type":"object","required":["status_message"],"properties":{"status_message":{"type":"string","example":"Role [Defendant] from the organisation policy successfully assigned to the assignee.","description":"Domain Status Message"}},"title":"Case Assignment Response"},"Case Unassignment Request":{"type":"object","required":["unassignments"],"properties":{"unassignments":{"type":"array","description":"Requested Unassignments","items":{"$ref":"#/definitions/Requested Unassignment From Case"}}},"title":"Case Unassignment Request"},"Case Unassignment Response":{"type":"object","required":["status_message"],"properties":{"status_message":{"type":"string","example":"Unassignment(s) performed successfully.","description":"Domain Status Message"}},"title":"Case Unassignment Response"},"CaseAssignedUsers":{"type":"object","properties":{"case_id":{"type":"string"},"shared_with":{"type":"array","items":{"$ref":"#/definitions/UserDetails"}}},"title":"CaseAssignedUsers"},"Get case assignments response":{"type":"object","required":["case_assignments","status_message"],"properties":{"case_assignments":{"type":"array","description":"Case Assignments","items":{"$ref":"#/definitions/CaseAssignedUsers"}},"status_message":{"type":"string","example":"Case-User-Role assignments returned successfully","description":"Domain Status Message"}},"title":"Get case assignments response"},"Requested Unassignment From Case":{"type":"object","required":["assignee_id","case_id"],"properties":{"assignee_id":{"type":"string","example":"ecb5edf4-2f5f-4031-a0ec","description":"IDAM ID of the User to Unassign"},"case_id":{"type":"string","example":1583841721773828,"description":"Case ID to Unassign Access To","minLength":16,"maxLength":16},"case_roles":{"type":"array","example":[ "[Claimant]", "[Defendant]" ],"description":"Case Roles to Unassign","items":{"type":"string"}}},"title":"Requested Unassignment From Case"},"UserDetails":{"type":"object","properties":{"case_roles":{"type":"array","items":{"type":"string"}},"email":{"type":"string"},"first_name":{"type":"string"},"idam_id":{"type":"string"},"last_name":{"type":"string"}},"title":"UserDetails"}}}
