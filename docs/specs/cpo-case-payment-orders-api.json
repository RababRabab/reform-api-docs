{"swagger":"2.0","info":{"description":"Case payment orders","version":"1.0.0","title":"Case Payment Orders API","contact":{"name":"CDM","url":"https://tools.hmcts.net/confluence/display/RCCD/Reform%3A+Core+Case+Data+Home","email":"corecasedatateam@hmcts.net"}},"host":"localhost","basePath":"/","tags":[{"name":"case-payment-orders-controller","description":"Case Payment Orders Controller"},{"name":"root-controller","description":"Root Controller"}],"paths":{"/":{"get":{"tags":["root-controller"],"summary":"welcome","operationId":"welcomeUsingGET","produces":["*/*"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"200":{"description":"OK","schema":{"type":"string"}}}}},"/case-payment-orders":{"get":{"tags":["case-payment-orders-controller"],"summary":"getCasePaymentOrders","operationId":"getCasePaymentOrdersUsingGET","produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"name":"cases-ids","in":"query","description":"casesId of ids","required":true,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"name":"ids","in":"query","description":"list of ids","required":true,"type":"array","items":{"type":"string"},"collectionFormat":"multi"},{"name":"pageNumber","in":"query","description":"pageNumber","required":true,"type":"integer","format":"int32"},{"name":"pageSize","in":"query","description":"pageSize","required":true,"type":"integer","format":"int32"},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/Page«CasePaymentOrderEntity»"}}}},"post":{"tags":["case-payment-orders-controller"],"summary":"Create Case Payment Order","description":"Create Case Payment Order","operationId":"createCasePaymentOrderRequestUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Create Case Payment Order Request"}},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"201":{"description":"Case Payment Order Created","schema":{"$ref":"#/definitions/CasePaymentOrder"}},"400":{"description":"One or more of the following reasons:\n1) Case ID has to be a valid 16-digit Luhn number.\n2) Case ID is required.\n3) Case ID has to be 16-digits long.\n4) Effective From is required.\n5) Action is required.\n6) Responsible Party is required.\n7) Order Reference is required.\n8) Order Reference has invalid format.\n9) Idam ID cannot be retrieved","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"Case ID has to be a valid 16-digit Luhn number.\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"409":{"description":"Case ID and Order Reference pairing must be unique."},"500":{"description":"Unexpected server error"}}},"put":{"tags":["case-payment-orders-controller"],"summary":"Update Case Payment Order","description":"Updates a case payment order","operationId":"updateCasePaymentOrderRequestUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"header","name":"Authorization","description":"Keyword `Bearer` followed by a valid IDAM user token","required":true},{"in":"body","name":"requestPayload","description":"requestPayload","required":true,"schema":{"$ref":"#/definitions/Update Case Payment Order Request"}},{"in":"header","name":"ServiceAuthorization","description":"Valid Service-to-Service JWT token for a whitelisted micro-service","required":true}],"responses":{"202":{"schema":{"$ref":"#/definitions/CasePaymentOrder"}},"400":{"description":"One or more of the following reasons:\n1) ID is required.\n2) ID is invalid.\n3) Effective From is required.\n4) Case ID is required.\n5) Case ID has to be a valid 16-digit Luhn number.\n6) Order Reference is required.\n7) Action is required.\n8) Responsible Party is required.","examples":{"application/json":"{\n   \"status\": \"400\",\n   \"error\": \"Bad Request\",\n   \"message\": \"Input not valid\",\n   \"path\": \"/case-payment-orders\",\n   \"details\": [ \"ID is required.\" ]\n}"},"schema":{"type":"string"}},"401":{"description":"Authentication failure due to invalid / expired tokens (IDAM / S2S)."},"403":{"description":"Unauthorised S2S service."},"404":{"description":"Case Payment Order does not exist."},"409":{"description":"Case ID and Order Reference pairing must be unique."}}}}},"definitions":{"CasePaymentOrder":{"type":"object","properties":{"action":{"type":"string"},"case_id":{"type":"integer","format":"int64"},"created_by":{"type":"string"},"created_timestamp":{"type":"string","example":"yyyy-MM-dd'T'HH:mm:ss'Z'"},"effective_from":{"type":"string","example":"yyyy-MM-dd'T'HH:mm:ss'Z'"},"id":{"type":"string","format":"uuid"},"order_reference":{"type":"string"},"responsible_party":{"type":"string"}},"title":"CasePaymentOrder"},"CasePaymentOrderEntity":{"type":"object","properties":{"action":{"type":"string"},"case_id":{"type":"integer","format":"int64"},"created_by":{"type":"string"},"created_timestamp":{"type":"string","format":"date-time"},"effective_from":{"type":"string","format":"date-time"},"id":{"type":"string","format":"uuid"},"order_reference":{"type":"string"},"responsible_party":{"type":"string"}},"title":"CasePaymentOrderEntity"},"Create Case Payment Order Request":{"type":"object","required":["action","case_id","effective_from","order_reference","responsible_party"],"properties":{"action":{"type":"string","example":"Case Submit","description":"Action that initiated the creation of the case payment order"},"case_id":{"type":"string","example":2061729969689088,"description":"Case Id for which the record applies","minLength":16,"maxLength":16},"effective_from":{"type":"string","format":"date-time","example":"2021-02-10T03:02:30Z","description":"The date/time from which the record is valid"},"order_reference":{"type":"string","example":"2021-11223344556","description":"Description of the Payments system order reference","pattern":"^2[0-9]{3}-[0-9]{11}$"},"responsible_party":{"type":"string","example":"Jane Doe","description":"Description of the party responsible for the case payment order"}},"title":"Create Case Payment Order Request"},"Pageable":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"page_number":{"type":"integer","format":"int32"},"page_size":{"type":"integer","format":"int32"},"paged":{"type":"boolean"},"sort":{"$ref":"#/definitions/Sort"},"unpaged":{"type":"boolean"}},"title":"Pageable"},"Page«CasePaymentOrderEntity»":{"type":"object","properties":{"content":{"type":"array","items":{"$ref":"#/definitions/CasePaymentOrderEntity"}},"empty":{"type":"boolean"},"first":{"type":"boolean"},"last":{"type":"boolean"},"number":{"type":"integer","format":"int32"},"number_of_elements":{"type":"integer","format":"int32"},"pageable":{"$ref":"#/definitions/Pageable"},"size":{"type":"integer","format":"int32"},"sort":{"$ref":"#/definitions/Sort"},"total_elements":{"type":"integer","format":"int64"},"total_pages":{"type":"integer","format":"int32"}},"title":"Page«CasePaymentOrderEntity»"},"Sort":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}},"title":"Sort"},"Update Case Payment Order Request":{"type":"object","required":["action","case_id","effective_from","id","order_reference","responsible_party"],"properties":{"action":{"type":"string","example":"Case Submit","description":"Action that initiated the creation of the case payment order"},"case_id":{"type":"string","example":1617288400189308,"description":"Case Id for which the record applies"},"effective_from":{"type":"string","format":"date-time","example":"2021-02-10T03:02:30Z","description":"The date/time from which the record is valid"},"id":{"type":"string","example":"77d30e7f-ead9-4529-a499-6bf8b0f2d08e","description":"Case Payment Order ID to update"},"order_reference":{"type":"string","example":1111,"description":"Description of the Payments system order reference"},"responsible_party":{"type":"string","example":"Jane Doe","description":"Description of the party responsible for the case payment order"}},"title":"Update Case Payment Order Request"}}}
